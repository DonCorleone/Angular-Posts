{"ast":null,"code":"import { combineLatest, merge, Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, filter, map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./post.service\";\nimport * as i2 from \"../post-categories/post-category.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i5 from \"@angular/common\";\nconst _c0 = [\"instance\"];\n\nfunction PostListComponent_div_13_table_1_tr_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const post_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(post_r5.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(post_r5.body);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(post_r5.category);\n  }\n}\n\nfunction PostListComponent_div_13_table_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 14)(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Body\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Category\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"tbody\");\n    i0.ɵɵtemplate(10, PostListComponent_div_13_table_1_tr_10_Template, 7, 3, \"tr\", 15);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const posts_r2 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngForOf\", posts_r2);\n  }\n}\n\nfunction PostListComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtemplate(1, PostListComponent_div_13_table_1_Template, 11, 1, \"table\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const posts_r2 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", posts_r2.length);\n  }\n}\n\nexport class PostListComponent {\n  constructor(postService, postCategoryService) {\n    this.postService = postService;\n    this.postCategoryService = postCategoryService;\n    this.title = 'Posts by Category';\n    this.focus$ = new Subject();\n    this.click$ = new Subject();\n    this.clear$ = new Subject();\n    this.categories$ = this.postCategoryService.allCategoriesSorted$;\n    this.postsForCategory$ = this.postService.postsForCategory$; // Formats the typeahead entry\n\n    this.formatter = category => category.name; // Handles the typeahead\n\n\n    this.search = text$ => {\n      const debouncedText$ = text$.pipe(debounceTime(200), distinctUntilChanged());\n      const clicksWithClosedPopup$ = this.click$.pipe(filter(() => !this.instance.isPopupOpen()));\n      const operations$ = merge(debouncedText$, clicksWithClosedPopup$, this.focus$, this.clear$);\n      return combineLatest([operations$, this.categories$]).pipe(map(([text, categories]) => text === '' ? categories : categories.filter(c => new RegExp(`^${text}`, 'i').test(c.name))));\n    };\n  }\n\n  ngOnInit() {}\n\n  categorySelected(category) {\n    this.postService.selectedCategoryChanged(category.id);\n  } // Clear the category display\n  // And display all of the posts\n\n\n  onClear() {\n    this.selectedCategory = undefined;\n    this.clear$.next('');\n    this.postService.selectedCategoryChanged(0);\n  }\n\n}\n\nPostListComponent.ɵfac = function PostListComponent_Factory(t) {\n  return new (t || PostListComponent)(i0.ɵɵdirectiveInject(i1.PostService), i0.ɵɵdirectiveInject(i2.PostCategoryService));\n};\n\nPostListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PostListComponent,\n  selectors: [[\"pm-post-list\"]],\n  viewQuery: function PostListComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.instance = _t.first);\n    }\n  },\n  decls: 15,\n  vars: 9,\n  consts: [[1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [1, \"container\"], [1, \"row\", \"justify-content-between\"], [1, \"col-3\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Select a Category\", 1, \"form-control\", 3, \"ngModel\", \"ngbTypeahead\", \"inputFormatter\", \"resultFormatter\", \"editable\", \"ngModelChange\", \"selectItem\", \"focus\", \"click\"], [\"instance\", \"ngbTypeahead\"], [\"type\", \"button\", 1, \"btn\", \"bg-transparent\", 2, \"margin-left\", \"-40px\", \"z-index\", \"100\", 3, \"click\"], [1, \"fa\", \"fa-times\"], [\"class\", \"table-responsive\", 4, \"ngIf\"], [1, \"table-responsive\"], [\"class\", \"table mb-0\", 4, \"ngIf\"], [1, \"table\", \"mb-0\"], [4, \"ngFor\", \"ngForOf\"]],\n  template: function PostListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵtext(2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"div\", 6)(8, \"input\", 7, 8);\n      i0.ɵɵlistener(\"ngModelChange\", function PostListComponent_Template_input_ngModelChange_8_listener($event) {\n        return ctx.selectedCategory = $event;\n      })(\"selectItem\", function PostListComponent_Template_input_selectItem_8_listener($event) {\n        return ctx.categorySelected($event.item);\n      })(\"focus\", function PostListComponent_Template_input_focus_8_listener($event) {\n        return ctx.focus$.next($event.target.value);\n      })(\"click\", function PostListComponent_Template_input_click_8_listener($event) {\n        return ctx.click$.next($event.target.value);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"button\", 9);\n      i0.ɵɵlistener(\"click\", function PostListComponent_Template_button_click_10_listener() {\n        return ctx.onClear();\n      });\n      i0.ɵɵelement(11, \"i\", 10);\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelement(12, \"br\");\n      i0.ɵɵtemplate(13, PostListComponent_div_13_Template, 2, 1, \"div\", 11);\n      i0.ɵɵpipe(14, \"async\");\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \", ctx.title, \" \");\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedCategory)(\"ngbTypeahead\", ctx.search)(\"inputFormatter\", ctx.formatter)(\"resultFormatter\", ctx.formatter)(\"editable\", false);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(14, 7, ctx.postsForCategory$));\n    }\n  },\n  directives: [i3.DefaultValueAccessor, i4.NgbTypeahead, i3.NgControlStatus, i3.NgModel, i5.NgIf, i5.NgForOf],\n  pipes: [i5.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwb3N0LWxpc3QuY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"sources":["/Users/developer/Documents/forks/Angular-Posts/src/app/posts/post-list.component.ts"],"names":["combineLatest","merge","Subject","debounceTime","distinctUntilChanged","filter","map","i0","i1","i2","i3","i4","i5","_c0","PostListComponent_div_13_table_1_tr_10_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","post_r5","$implicit","ɵɵadvance","ɵɵtextInterpolate","title","body","category","PostListComponent_div_13_table_1_Template","ɵɵtemplate","posts_r2","ɵɵnextContext","ngIf","ɵɵproperty","PostListComponent_div_13_Template","length","PostListComponent","constructor","postService","postCategoryService","focus$","click$","clear$","categories$","allCategoriesSorted$","postsForCategory$","formatter","name","search","text$","debouncedText$","pipe","clicksWithClosedPopup$","instance","isPopupOpen","operations$","text","categories","c","RegExp","test","ngOnInit","categorySelected","selectedCategoryChanged","id","onClear","selectedCategory","undefined","next","ɵfac","PostListComponent_Factory","t","ɵɵdirectiveInject","PostService","PostCategoryService","ɵcmp","ɵɵdefineComponent","type","selectors","viewQuery","PostListComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","decls","vars","consts","template","PostListComponent_Template","ɵɵlistener","PostListComponent_Template_input_ngModelChange_8_listener","$event","PostListComponent_Template_input_selectItem_8_listener","item","PostListComponent_Template_input_focus_8_listener","target","value","PostListComponent_Template_input_click_8_listener","PostListComponent_Template_button_click_10_listener","ɵɵelement","ɵɵpipe","ɵɵtextInterpolate1","ɵɵpipeBind1","directives","DefaultValueAccessor","NgbTypeahead","NgControlStatus","NgModel","NgIf","NgForOf","pipes","AsyncPipe","styles"],"mappings":"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","sourcesContent":["import { combineLatest, merge, Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, filter, map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./post.service\";\nimport * as i2 from \"../post-categories/post-category.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i5 from \"@angular/common\";\nconst _c0 = [\"instance\"];\nfunction PostListComponent_div_13_table_1_tr_10_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n} if (rf & 2) {\n    const post_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(post_r5.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(post_r5.body);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(post_r5.category);\n} }\nfunction PostListComponent_div_13_table_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 14)(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Body\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Category\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"tbody\");\n    i0.ɵɵtemplate(10, PostListComponent_div_13_table_1_tr_10_Template, 7, 3, \"tr\", 15);\n    i0.ɵɵelementEnd()();\n} if (rf & 2) {\n    const posts_r2 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngForOf\", posts_r2);\n} }\nfunction PostListComponent_div_13_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtemplate(1, PostListComponent_div_13_table_1_Template, 11, 1, \"table\", 13);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const posts_r2 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", posts_r2.length);\n} }\nexport class PostListComponent {\n    constructor(postService, postCategoryService) {\n        this.postService = postService;\n        this.postCategoryService = postCategoryService;\n        this.title = 'Posts by Category';\n        this.focus$ = new Subject();\n        this.click$ = new Subject();\n        this.clear$ = new Subject();\n        this.categories$ = this.postCategoryService.allCategoriesSorted$;\n        this.postsForCategory$ = this.postService.postsForCategory$;\n        // Formats the typeahead entry\n        this.formatter = (category) => category.name;\n        // Handles the typeahead\n        this.search = (text$) => {\n            const debouncedText$ = text$.pipe(debounceTime(200), distinctUntilChanged());\n            const clicksWithClosedPopup$ = this.click$.pipe(filter(() => !this.instance.isPopupOpen()));\n            const operations$ = merge(debouncedText$, clicksWithClosedPopup$, this.focus$, this.clear$);\n            return combineLatest([\n                operations$,\n                this.categories$\n            ]).pipe(map(([text, categories]) => text === '' ? categories : categories.filter(c => new RegExp(`^${text}`, 'i').test(c.name))));\n        };\n    }\n    ngOnInit() {\n    }\n    categorySelected(category) {\n        this.postService.selectedCategoryChanged(category.id);\n    }\n    // Clear the category display\n    // And display all of the posts\n    onClear() {\n        this.selectedCategory = undefined;\n        this.clear$.next('');\n        this.postService.selectedCategoryChanged(0);\n    }\n}\nPostListComponent.ɵfac = function PostListComponent_Factory(t) { return new (t || PostListComponent)(i0.ɵɵdirectiveInject(i1.PostService), i0.ɵɵdirectiveInject(i2.PostCategoryService)); };\nPostListComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PostListComponent, selectors: [[\"pm-post-list\"]], viewQuery: function PostListComponent_Query(rf, ctx) { if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n    } if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.instance = _t.first);\n    } }, decls: 15, vars: 9, consts: [[1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [1, \"container\"], [1, \"row\", \"justify-content-between\"], [1, \"col-3\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Select a Category\", 1, \"form-control\", 3, \"ngModel\", \"ngbTypeahead\", \"inputFormatter\", \"resultFormatter\", \"editable\", \"ngModelChange\", \"selectItem\", \"focus\", \"click\"], [\"instance\", \"ngbTypeahead\"], [\"type\", \"button\", 1, \"btn\", \"bg-transparent\", 2, \"margin-left\", \"-40px\", \"z-index\", \"100\", 3, \"click\"], [1, \"fa\", \"fa-times\"], [\"class\", \"table-responsive\", 4, \"ngIf\"], [1, \"table-responsive\"], [\"class\", \"table mb-0\", 4, \"ngIf\"], [1, \"table\", \"mb-0\"], [4, \"ngFor\", \"ngForOf\"]], template: function PostListComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtext(2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"div\", 6)(8, \"input\", 7, 8);\n        i0.ɵɵlistener(\"ngModelChange\", function PostListComponent_Template_input_ngModelChange_8_listener($event) { return ctx.selectedCategory = $event; })(\"selectItem\", function PostListComponent_Template_input_selectItem_8_listener($event) { return ctx.categorySelected($event.item); })(\"focus\", function PostListComponent_Template_input_focus_8_listener($event) { return ctx.focus$.next($event.target.value); })(\"click\", function PostListComponent_Template_input_click_8_listener($event) { return ctx.click$.next($event.target.value); });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function PostListComponent_Template_button_click_10_listener() { return ctx.onClear(); });\n        i0.ɵɵelement(11, \"i\", 10);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelement(12, \"br\");\n        i0.ɵɵtemplate(13, PostListComponent_div_13_Template, 2, 1, \"div\", 11);\n        i0.ɵɵpipe(14, \"async\");\n        i0.ɵɵelementEnd()();\n    } if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.title, \" \");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedCategory)(\"ngbTypeahead\", ctx.search)(\"inputFormatter\", ctx.formatter)(\"resultFormatter\", ctx.formatter)(\"editable\", false);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(14, 7, ctx.postsForCategory$));\n    } }, directives: [i3.DefaultValueAccessor, i4.NgbTypeahead, i3.NgControlStatus, i3.NgModel, i5.NgIf, i5.NgForOf], pipes: [i5.AsyncPipe], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwb3N0LWxpc3QuY29tcG9uZW50LmNzcyJ9 */\"] });\n"]},"metadata":{},"sourceType":"module"}